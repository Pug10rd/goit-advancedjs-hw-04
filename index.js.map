{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/config/iziToast.js","../src/js/pixabay-api.js","../src/js/simpleLightbox.js","../src/js/render-functions.js","../src/js/services/ButtonService.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.js-loader'),\n  loadMore: document.querySelector('.load-more'),\n};\n\nexport const photoQueryParams = {\n  page: 1,\n  perPage: 10,\n  query: '',\n  maxPage: 1,\n};\n","import iziToast from 'izitoast';\n\niziToast.settings({\n  timeout: 3000,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n\n  iconColor: '#FFF',\n  color: '#FFF',\n\n  close: true,\n  position: 'topRight',\n\n  messageColor: '#FFF',\n  messageSize: '16px',\n\n  progressBar: true,\n\n  progressBarEasing: 'linear',\n});\n\nexport { iziToast };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nasync function getImages({ query, page = 1, perPage = 10 }) {\n  const res = await axios.get('/', {\n    params: {\n      key: '34066974-b9ed0af14756539ad49c5eed8',\n      q: query,\n      page,\n      per_page: perPage,\n    },\n  });\n\n  return res.data;\n}\n\nexport { getImages };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","import { refs } from './refs';\nimport { lightbox } from './simpleLightbox';\n\nexport const renderGallery = images => {\n  const itemMarkup = ({\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) => `\n      <li class=\"card card-set-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\" href=\"#\">\n              <div class=\"photo-box\">\n                <img\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  class=\"photo\"\n                />\n              </div>\n              <div class=\"capture\">\n                <div class=\"item\"><span class=\"accent\">Likes</span>${likes}</div>\n                <div class=\"item\"><span class=\"accent\">Views</span>${views}</div>\n                <div class=\"item\"><span class=\"accent\">Comments</span>${comments}</div>\n                <div class=\"item\">\n                  <span class=\"accent\">Downloads</span>${downloads}\n                </div>\n              </div>\n            </a>\n          </li>\n      `;\n  const galleryMarkup = images.map(image => itemMarkup(image)).join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  lightbox.refresh();\n};\n","export default class LoadMoreButton {\n  static HIDDEN_CLASS = 'is-hidden';\n\n  constructor(buttonEl) {\n    this.button = buttonEl;\n    this.prevText = '';\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.prevText = this.button.textContent;\n    this.button.textContent = 'Loading...';\n  }\n\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = this.prevText || 'Load more';\n  }\n\n  hide() {\n    this.button.classList.add(LoadMoreButton.HIDDEN_CLASS);\n    this.prevText = '';\n  }\n\n  show() {\n    this.button.classList.remove(LoadMoreButton.HIDDEN_CLASS);\n  }\n}\n","import { refs } from './refs';\nimport { iziToast } from './config/iziToast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages } from './pixabay-api';\nimport { renderGallery } from './render-functions';\nimport LoadMoreButton from './services/ButtonService';\n\nconst iziToastOptions = {\n  progressBarColor: '#B51B1B',\n  backgroundColor: '#EF4040',\n  maxWidth: '432px',\n};\n\nconst loadMoreButton = new LoadMoreButton(refs.loadMore);\n\nlet page = 1;\nconst perPage = 20;\nlet query = '';\n\nconst showToast = message => {\n  iziToast.show({ ...iziToastOptions, message });\n};\n\nexport async function handleImagesSearch(e) {\n  e.preventDefault();\n\n  refs.gallery.innerHTML = '';\n\n  query = refs.form.elements.search.value.trim();\n\n  if (!query) {\n    showToast('Oops! Looks like you forgot to enter something.');\n    return;\n  }\n\n  refs.loader.classList.remove('visually-hidden');\n\n  console.log(refs.form.elements.search.value.trim());\n\n  refs.form.elements.search.value = '';\n\n  console.log(refs.form.elements.search.value.trim());\n\n  try {\n    console.log(`input is ${query}`);\n\n    const data = await getImages({ query });\n    if (data.hits.length === 0) {\n      showToast(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      loadMoreButton.hide();\n      return;\n    } else if (data.hits.length <= perPage) {\n      loadMoreButton.hide();\n    }\n    renderGallery(data.hits);\n    loadMoreButton.show();\n    loadMoreButton.enable();\n  } catch (err) {\n    showToast(`Sorry, something went wrong: ${err}`);\n  } finally {\n    refs.loader.classList.add('visually-hidden');\n    page = 1;\n  }\n}\n\nexport async function handleLoadMore() {\n  if (!query) {\n    showToast('No search query found. Please try again!');\n    return;\n  }\n\n  page += 1;\n  loadMoreButton.disable();\n\n  try {\n    const data = await getImages({ query, page, perPage });\n\n    if (!data || data.hits.length === 0) {\n      loadMoreButton.hide();\n      loadMoreButton.disable();\n      showToast(\"We're sorry, but you've reached the end of search results.\");\n      return;\n    }\n\n    renderGallery(data.hits);\n\n    loadMoreButton.enable();\n  } catch (error) {\n    showToast(`Error loading more images: ${error}`);\n  }\n}\n","import { refs } from './js/refs';\nimport { handleImagesSearch, handleLoadMore } from './js/handlers';\nimport LoadMoreButton from './js/services/ButtonService';\n\nrefs.form.addEventListener('submit', handleImagesSearch);\n\nconst loadMoreButton = new LoadMoreButton(refs.loadMore);\n\nrefs.loadMore.addEventListener('click', handleLoadMore);\n\nexport { loadMoreButton };\n"],"names":["refs","iziToast","axios","getImages","query","page","perPage","lightbox","SimpleLightbox","renderGallery","images","itemMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","galleryMarkup","image","_LoadMoreButton","buttonEl","__publicField","LoadMoreButton","iziToastOptions","loadMoreButton","showToast","message","handleImagesSearch","e","data","err","handleLoadMore","error"],"mappings":"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"}